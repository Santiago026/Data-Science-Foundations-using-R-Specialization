# Webscraping
**Webscraping**: Programmatically exracting data from the HTML code of websites
 - It can be a great way to get data [How Netflix reverse engineered Hollywood](https://www.theatlantic.com/technology/archive/2014/01/how-netflix-reverse-engineered-hollywood/282679/)
 - Many websites have information you may want to programmitcally read
 - In some cases this is against the terms of service for the website
 - Attempting to read too many pages too quickly can get you IP address blocked
-More information concerning webscraping [here](http://en.wikipedia.org/wiki/Web_scraping)

# Example: Google Scholar
- Website found [here](http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en)
```R
> con = url("http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en")
> htmlCode = readLines(con)
Warning message:
In readLines(con) :
  incomplete final line found on 'http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en'
> close(con)
> substr(htmlCode, start = 1, stop = 1000)
[1] "<!doctype html><html><head><title>Jeff Leek - Google Scholar Citations</title><meta http-equiv=\"Content-Type\" content=\"text/html;charset=ISO-8859-1\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=Edge\"><meta name=\"referrer\" content=\"always\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=2\"><meta name=\"format-detection\" content=\"telephone=no\"><link rel=\"shortcut icon\" href=\"/favicon.ico\"><link rel=\"canonical\" href=\"http://scholar.google.com/citations?user=HI-I6C0AAAAJ&amp;hl=en\"><style>html,body,form,table,div,h1,h2,h3,h4,h5,h6,img,ol,ul,li,button{margin:0;padding:0;border:0;}table{border-collapse:collapse;border-width:0;empty-cells:show;}html,body{height:100%}#gs_top{position:relative;box-sizing:border-box;min-height:100%;min-width:964px;-webkit-tap-highlight-color:rgba(0,0,0,0);}#gs_top>*:not(#x){-webkit-tap-highlight-color:rgba(204,204,204,.5);}.gs_el_ph #gs_top,.gs_el_ta #gs_top{min-width:320px;}#gs_top.gs_nscl{position:fixed;width:10"                      
 [2] ""                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
 [3] " Copyright The Closure Library Authors."                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
 [4] " SPDX-License-Identifier: Apache-2.0"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
 [5] "*/"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
 [6] "var aa=\"function\"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b},ba;if(\"function\"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var da;a:{var ea={W:!0},fa={};try{fa.__proto__=ea;da=fa.W;break a}catch(a){}da=!1}ba=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+\" is not extensible\");return a}:null}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
 [7] "var ha=ba,ia=function(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if(\"prototype\"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]},ja=function(){},ka=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}};var la=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};var g=function(){this.v=this.v;this.A=this.A};g.prototype.v=!1;g.prototype.P=function(){this.v||(this.v=!0,this.D())};g.prototype.D=function(){if(this.A)for(;this.A.length;)this.A.shift()()};function k(a,b){a.classList.add(b)}function n(a,b){a.classList.remove(b)}function p(a,b){return a.classList?a.classList.contains(b):!1}function q(a,b,c){c=void 0!==c?c:!p(a,b);(c?k:n)(a,b)};function r(a){return 0<=(navigator.userAgent||\"\").indexOf(a)}var ma=r(\"iPhone\")||r(\"iPad\")||r(\"iPod\"),na=r(\"iPhone\")||r(\"Android\")&&r(\"Mobi"                                   
 [8] "pa=qa?0<+qa[1]:r(\"Android\")?!0:window.matchMedia&&window.matchMedia(\"(pointer)\").matches?window.matchMedia(\"(pointer:coarse)\").matches:!r(\"Firefox\")||r(\"Mobile\")||r(\"Tablet\")?ma||\"ontouchstart\"in window||0<(navigator.msMaxTouchPoints||0):!1;function ra(){if(void 0==sa){sa=!1;try{var a=Object.defineProperty({},\"passive\",{get:function(){sa=!0}});window.addEventListener(\"testPassive\",ja,a);window.removeEventListener(\"testPassive\",ja,a)}catch(b){}}return sa}var sa;var ta=function(a){this.V=a},ua=new ta(\"INPUT\"),va=new ta(\"TABLE\");function t(a){return document.getElementById(a)}function x(a){return a.id||(a.id=\"gs_id\"+wa++)}function xa(a){a=(void 0===a?null:a)||document.body;return\"rtl\"==(a?window.getComputedStyle(a,null):null).direction}"                                                                                                                                                                                                                                                                                       
 [9] "function ya(a){var b=[];a=a.elements;for(var c=a.length,d=0;d<c;d++){var e=a[d],f=encodeURIComponent(e.name||\"\"),h=e.type;!f||e.disabled||!(\"checkbox\"!=h&&\"radio\"!=h||e.checked)||b.push(f+\"=\"+encodeURIComponent(e.value||\"\"))}return b.join(\"&\")}function za(a,b){var c=a.elements[b];c||(c=document.createElement(ua.V),c.type=\"hidden\",c.name=b,a.appendChild(c));return c}function Aa(a){t(\"gsc_md_cbyd_c\").href=a&&a.match(Ba)?a:\"javascript:void(0)\"}function Ca(a){a.match(Ba)&&(window.location.href=a)}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
[10] "var wa=100,Da=/\\S+/g,Ba=/^(?:https?:|[^:/?#]*(?:[/?#]|$))/i,Ea=/^(?:#|\\/[a-z0-9_-]*(?:[?].*)?$)/i;function y(a){return a.hasOwnProperty(\"gs_uid\")?a.gs_uid:a.gs_uid=++Fa}var Fa=0;var z=function(){this.b=[];this.m={};this.I=this.l=0};z.prototype.add=function(a){var b=y(a);this.m[b]||(this.b.push(a),this.m[b]=this.b.length,++this.l)};z.prototype.remove=function(a){a=y(a);var b=this.m[a];b&&(this.b[b-1]=null,delete this.m[a],2*--this.l<this.b.length&&!this.I&&Ga(this))};z.prototype.i=function(a){var b=this.b;try{++this.I;for(var c=0;c<b.length;c++){var d=b[c];d&&d.apply(null,arguments)}}finally{!--this.I&&2*this.l<b.length&&Ga(this)}};"                                                                                                                                                                                                                                                                                                                                                                                                                       
[11] "var Ga=function(a){var b=a.b,c=b.length;a=a.m;for(var d=0,e=0;e<c;e++){var f=b[e];f&&(b[d]=f,a[y(f)]=++d)}b.length=d};function B(a,b,c,d,e){Ha(a,b,c,void 0===d?!1:d,void 0===e?!1:e,Ia)}function C(a,b,c,d){Ha(a,b,c,void 0===d?!1:d,!1,Ja)}function Ka(a,b,c,d){function e(h){C(f,a,e,c);b(h)}var f=document;c=void 0===c?!1:c;B(f,a,e,c,void 0===d?!1:d)}function D(a){La?La.add(a):a()}var Ma=window.requestAnimationFrame?function(a){window.requestAnimationFrame(a)}:function(a){setTimeout(a,33)};function Na(a){a.stopPropagation();a.preventDefault()}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
[12] "function Oa(a){return(a.ctrlKey?1:0)|(a.altKey?2:0)|(a.metaKey?4:0)|(a.shiftKey?8:0)}function Pa(a,b){return(b=b&&ra())?{passive:b,capture:a}:a}function Ia(a,b,c,d,e){a.addEventListener(b,c,Pa(d,e))}function Ja(a,b,c,d){a.removeEventListener(b,c,d)}function Ha(a,b,c,d,e,f){if(\"string\"===typeof b)f(a,b,c,d,e);else for(var h=b.length,l=0;l<h;l++)f(a,b[l],c,d,e)}function Qa(){La.i();La=null}function Ra(){\"complete\"==document.readyState&&(C(document,\"readystatechange\",Ra),Qa())}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
[13] "var La,Sa=!!document.attachEvent,Ta=document.readyState;if(Sa?\"complete\"!=Ta:\"loading\"==Ta)La=new z,Sa?B(document,\"readystatechange\",Ra):Ka(\"DOMContentLoaded\",Qa);function Ua(){Ka([\"mousedown\",\"touchstart\"],function(){q(document.documentElement,\"gs_pfcs\",!0);B(document,\"keydown\",Va,!0)},!0,!0)}function Va(a){9==a.keyCode&&(q(document.documentElement,\"gs_pfcs\",!1),C(document,\"keydown\",Va,!0),Ua())}Ua();function Wa(a,b,c,d,e){var f=t(a);Xa(f,function(){k(f,\"gs_vis\");b&&b()},function(){n(f,\"gs_vis\");c&&c()},d,e)}function Xa(a,b,c,d,e){var f=x(a);if(!E[f]){var h=document.activeElement;Ya(Za(a),!0);b&&b();G.push(function(l){delete E[f];try{l||(e||h).focus()}catch(m){}c&&c()});E[f]=G.length;h&&a.contains(h)||setTimeout(function(){var l=d,m=l&&\"text\"==l.type;if(!l||m&&pa)l=a;try{l.focus(),m&&(l.value=l.value)}catch(w){}},0)}}function I(a){Ya((E[a]||1E6)-1,!1)}"                                                                                                                                                               
[14] "function $a(a){a=void 0===a?!1:a;G.pop()(a)}function Ya(a,b){for(b=void 0===b?!1:b;G.length>a;)$a(b||G.length>a+1)}function Za(a){for(var b=0;a&&!(b=E[a.id]||0);)a=a.parentNode;return b}var G=[],E={};B(document,\"click\",function(a){var b=G.length;b&&!Oa(a)&&b>Za(a.target)&&$a(!0)});B(document,\"keydown\",function(a){27==a.keyCode&&!Oa(a)&&G.length&&$a()});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
[15] "B(document,\"focus\",function(a){var b=G.length;if(b)for(var c=Za(a.target);c<b;){var d=\"\",e;for(e in E)if(E[e]==b){d=e;break}a:{d=(t(d).getAttribute(\"data-wfc\")||\"\").match(Da)||[];for(var f=0;f<d.length;f++){var h=t(d[f]);if(h&&h.offsetWidth){d=h;break a}}d=void 0}if(d){Na(a);d.focus();break}else $a(!0),--b}},!0);var ab={},bb={},cb;try{cb=window.sessionStorage}catch(a){};function J(a){return\"object\"==typeof a?a:null}function db(a,b){b=eb(b);a=fb(a);a=gb(a)||\"#\";hb=J(b);ib?window.history.pushState(b,\"\",a):window.location.assign(a)}function jb(a,b){b=eb(b);a=fb(a);a=gb(a)||\"#\";hb=J(b);ib?window.history.replaceState(b,\"\",a):window.location.replace(a)}function gb(a){var b=[],c;for(c in a)b.push(encodeURIComponent(c)+\"=\"+encodeURIComponent(a[c]));return(a=b.sort().join(\"&\"))?\"#\"+a:\"\"}"                                                                                                                                                                                                                                           
[16] "function kb(a){var b={};a=a.split(\"&\");for(var c=0;c<a.length;c++){var d=a[c],e=d.indexOf(\"=\");if(e+1){var f=d.substr(0,e);d=d.substr(e+1)}else f=d,d=\"\";f&&(b[decodeURIComponent(f)]=decodeURIComponent(d))}return b}function lb(a){var b=a.indexOf(\"#\")+1;return kb(b?a.substr(b):\"\")}function mb(a){var b=a.indexOf(\"?\")+1;a=b?a.substr(b):\"\";b=a.indexOf(\"#\");return kb(b+1?a.substr(0,b):a)}function nb(a,b){for(var c in b){var d=b[c];void 0!==d?a[c]=d:delete a[c]}}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
[17] "function fb(a){var b=lb(window.location.hash);nb(b,a);return b}function eb(a){var b=hb||J(window.history.state),c={},d;for(d in b)c[d]=b[d];nb(c,a);return c}function ob(){setTimeout(function(){if(!pb){var a=window.history.state;pb=!0;hb=J(a);qb.i()}tb=!1},0)}var qb=new z,hb,pb=!1,tb=!0,ib=\"pushState\"in window.history,ub;"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
[18] "if(\"undefined\"==typeof GSP)ub=!1;else{var vb=.001*Date.now(),wb=GSP.eventId,xb=!1,K,yb=cb;if(!(\"nh\"in ab)){var zb=yb&&yb.getItem(\"nh\"),Ab;if(zb)try{Ab=JSON.parse(zb)}catch(a){}bb.nh=Ab}K=bb.nh;K instanceof Array||(K=[]);for(var Bb=K.length,Cb=0,Db=0;Db<Bb;Db++){var Eb=K[Db];if(Eb instanceof Array&&2==Eb.length){var Fb=Eb[1]==wb;xb=xb||Fb;10>=Bb-Db&&+Eb[0]>vb-86400&&!Fb&&(K[Cb++]=Eb)}}K.length=Cb;K.push([vb,wb]);var Gb=K,Hb=cb;bb.nh=Gb;try{Hb&&Hb.setItem(\"nh\",JSON.stringify(Gb))}catch(a){}ub=xb}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
[19] "var Ib=ub;\"onpageshow\"in window?B(window,\"pageshow\",ob):D(ob);B(window,ib?\"popstate\":\"hashchange\",function(a){\"loading\"!=document.readyState&&(a=a.state,pb=!0,hb=J(a),qb.i())});function Jb(){var a=Kb();k(a,\"gs_anm\");k(a,\"gs_vis\");B(document,\"click\",Lb);clearTimeout(Mb);Mb=setTimeout(Lb,4E3);++Nb;setTimeout(Ob,0)}function Lb(){Nb||(C(document,\"click\",Lb),clearTimeout(Mb),Mb=void 0,n(Kb(),\"gs_vis\"))}function Kb(){return t(\"gs_alrt\")}function Ob(){Nb=0}var Mb,Nb=0;D(function(){var a=t(\"gs_alrt_m\");a&&(a.innerHTML&&!Ib&&Jb(),B(window,\"pagehide\",function(){Nb=0;Lb();n(Kb(),\"gs_anm\")}))});function Pb(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState){var e=d.status,f=d.responseText,h=d.responseURL,l=window.location,m=l.protocol;l=\"//\"+l.host+\"/\";h&&h.indexOf(m+l)&&h.indexOf(\"https:\"+l)&&(e=0,f=\"\");c(e,f)}};d.open(b?\"POST\":\"GET\",a,!0);d.setRequestHeader(\"X-Requested-With\",\"XHR\");b&&d.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");b?d.send"  
[20] "function P(a,b,c){var d=ac;\"string\"===typeof b&&(bc[0]=b,b=bc);var e=b.length;a=Vb(a);for(var f in a)for(var h in a[f])for(var l=0;l<e;l++)d(f,h,b[l],c)}function Vb(a){\"string\"===typeof a&&(cc[0]=a,a=cc);for(var b=a.length,c=Object.create(null),d=0;d<b;d++){var e=a[d],f=e.charAt(0),h=e.substr(1);if(\"#\"!=f&&\".\"!=f||!h)throw Error(\"bad selector: \"+e);(e=c[f])||(e=c[f]=Object.create(null));e[h]=!0}return c}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
[21] "function ac(a,b,c,d){var e=dc[c];e||(\"touchstart\"!=c&&\"mouseover\"!=c&&\"mouseout\"!=c&&B(document,c,ec,\"focus\"==c||\"blur\"==c),e=dc[c]=Object.create(null));(c=e[a])||(c=e[a]=Object.create(null));(a=c[b])||(a=c[b]=new z);a.add(d)}function ec(a){var b=a.target;b&&3==b.nodeType&&(b=b.parentNode);$b(new Rb(a.type,b,a))}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
[22] "function $b(a){for(var b=a.target;b&&b!=document&&!b.disabled&&!p(b,\"gs_dis\");){a.currentTarget=b;var c=b.id;if(c&&!fc(\"#\",c,a))break;c=b.classList||[];for(var d=c.length,e=0;e<d;e++)if(!fc(\".\",c[e],a))return;b=b.parentNode}}function fc(a,b,c){var d=dc[c.type];(b=(a=d&&d[a])&&a[b])&&b.i(c);return!c.J}function Xb(a,b,c,d){var e=c.K;c=c.ia;for(var f in c)P(e,f,ka(d,a,c[f])),b.push(new Sb(e))}function Yb(a,b,c){var d=c.currentTarget;a=gc(a,d)||a;a=hc(a,d);b.call(a,c)}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
[23] "function Zb(a,b,c){a:{for(var d=c.currentTarget;d&&d!=document;){var e=gc(a,d);if(e){a=hc(e,d);break a}d=d.parentNode}a=void 0}a&&b.call(a,c)}function hc(a,b){var c=ic(b),d=jc[c];d||(d=jc[c]=[]);for(var e=d.length,f=0;f<e;f++){var h=d[f];if(h instanceof a)return h}b=new a(b);d.push(b);a=y(a);(d=kc[a])||(d=kc[a]=[]);d.push(c);return b}function gc(a,b){var c,d=b.id;d&&(c=lc(a,c,\"#\",d));b=b.classList||[];d=b.length;for(var e=0;e<d;e++)c=lc(a,c,\".\",b[e]);return c}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
[24] "function lc(a,b,c,d){c=(d=(c=Wb[c])&&c[d])?d.length:0;for(var e=0;e<c;e++){var f=d[e];!(f===a||f.prototype instanceof a)||b&&!(f===b||f.prototype instanceof b)||(b=f)}return b}function ic(a){var b=a.getAttribute(\"data-duid\");b||a.setAttribute(\"data-duid\",b=\"\"+mc++);return b}var dc=Object.create(null),cc=[\"\"],bc=[\"\"],Wb=Object.create(null),Ub=Object.create(null),kc=Object.create(null),jc=Object.create(null),mc=100;window.gs_evt_dsp=ec;function nc(){var a=\".gs_md_li\";if(\"string\"===typeof a){var b=a.charAt(0),c=a.slice(1);if(\"#\"==b)a=function(d){return d.id==c&&0<d.offsetWidth};else if(\".\"==b)a=function(d){return p(d,c)&&0<d.offsetWidth};else throw Error(\"bad selector: \"+a);}return a}function oc(a,b){return a&&((void 0===b?0:b)?a.lastElementChild:a.firstElementChild)}function pc(a,b){return a&&((void 0===b?0:b)?a.previousElementSibling:a.nextElementSibling)}function qc(a,b,c){c=void 0===c?!1:c;return rc(a,b,nc(),c,!1)}"                                                                                                     
[25] "function rc(a,b,c,d,e){for(var f;b&&a;){if(c(b)){if(e)return b}else for(f=oc(b,d);f;f=pc(f,d))if(e=rc(f,f,c,d,!0))return e;for(e=!0;;){if(b==a)return null;f=b.parentNode;if(b=pc(b,d))break;b=f}}return null};function sc(a){return!!p(a,\"gs_sel\")+2*!!p(a,\"gs_par\")}function tc(a){return+a.getAttribute(\"data-s\")}function uc(a,b,c){c=void 0===c?!1:c;q(a,\"gs_sel\",1==b);q(a,\"gs_par\",2==b);a.setAttribute(\"aria-checked\",vc[b]);c||a.setAttribute(\"data-s\",\"\"+b)}var vc=[\"false\",\"true\",\"mixed\"];var Q=function(){this.f=Object.create(null);this.g=0};Q.prototype.clear=function(){this.f=Object.create(null);this.g=0};Q.prototype.has=function(a){return a in this.f};Q.prototype.get=function(a){return this.f[a]};Q.prototype.set=function(a,b){this.has(a)||this.g++;this.f[a]=b};Q.prototype.delete=function(a){this.has(a)&&(delete this.f[a],this.g--)};var wc=function(a){var b=window,c=this;this.b=new z;this.S=0;this.O=[b,a,function(){c.S++||Ma(d)},!1];var d=function(){c.S=0;c.b.i()}};wc.prototype.addListener=fu"                            
[26] "m.id+\"-bdy\")||m,F=t(m.getAttribute(\"data-shd\")||\"gs_md_s\"),A=Cc(m),ca=!!A&&p(A,\"gs_md_wmw\"),N=window.pageYOffset,$d=l.scrollHeight>h.clientHeight,rb=!!E[a],sb=rb?\"\":S,Lc=b&&\"#\"!=b[0]&&!d,be=a==S&&b==Dc&&c==T;Ec=b;Lc?(rb?q(v,\"gs_md_ldg\",!0):Fc(m,v,'<div class=\"gs_md_prg\">'+t(\"gs_md_ldg\").innerHTML+\"</div>\"),O(\"gs-md-ldin\",v)):(d&&Fc(m,v,d),O(\"gs-md-lded\",v));sb&&(++Gc,I(sb),--Gc);S=a;Dc=b;T=c;Hc=d;be||Gc||(Ic+=1,(sb?jb:db)(Kc(),Mc()));rb||Xa(m,function(){A&&k(A,\"gs_vis\");k(m,\"gs_vis\");q(m,\"gs_abt\","                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
[27] "tb);Nc(a);zc.add(e);e();A&&w&&(f(),yc.addListener(f));k(l,\"gs_nscl\");l.style.top=-N+\"px\"},function(){zc.remove(e);yc.removeListener(f);A&&n(A,\"gs_vis\");n(m,\"gs_vis\");n(m,\"gs_abt\");n(F,\"gs_vis\");h.style.overflowY=\"\";n(l,\"gs_nscl\");l.style.top=\"auto\";Qb(U);U=null;window.scrollTo(0,N);S=Dc=T=Hc=\"\";var u=Ic;Ic=0;Gc||(0<u?window.history.go(-u):jb(Kc(),Mc()))},Oc(m),Pc(m));Lc&&(Qb(U),U=null,U=Pb(b,c,function(u,H){U=null;u=200==u;Fc(m,v,u?H:Qc());u&&a==S&&b==Dc&&c==T&&(Hc=H,jb(Kc(),Mc()));O(\"gs-md-lded\","                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
[28] "v)}))}function Cc(a){a=a.parentNode;return p(a,\"gs_md_wnw\")?a:null}function Oc(a){return(a=a.getAttribute(\"data-ifc\"))?t(a):null}function Pc(a){return(a=a.getAttribute(\"data-cfc\"))?t(a):null}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
[29] "function Fc(a,b,c){q(b,\"gs_md_ldg\",!1);for(var d=b.querySelectorAll(\"[data-duid]\"),e=d.length,f={},h=0;h<e;h++){for(var l=ic(d[h]),m=jc[l],w=m?m.length:0,v=0;v<w;v++){var F=m[v],A=y(F.constructor),ca=f[A];ca||(ca=f[A]={});ca[l]=!0;F&&\"function\"==typeof F.P&&F.P()}delete jc[l]}for(var N in f){N=+N;d=f[N];h=(e=kc[N])?e.length:0;for(m=l=0;m<h;m++)w=e[m],w in d||(e[l++]=w);l?e.length=l:delete kc[N]}b.innerHTML=c;Nc(a.id);Qb(U);U=null}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
[30] "function Nc(a){if(a=document.querySelector(\"#\"+a+\">.gs_md_bdy\"))a.scrollTop=a.scrollLeft=0,Bc(a)}function Bc(a){var b=a.style,c=\"padding\"+(xa(a)?\"Left\":\"Right\");b[c]=\"\";var d=a.offsetWidth-a.clientWidth;2<d&&(a=parseInt(window.getComputedStyle(a,null)[c],10)||0,b[c]=Math.max(a-d,0)+\"px\")}function Qc(){return'<div class=\"gs_md_prg\"><div class=\"gs_alrt\">'+t(\"gs_md_err\").innerHTML+\"</div></div>\"}function Kc(){return{d:S||void 0,u:Dc||void 0,p:T?\"1\":void 0}}function Mc(){return{n:Ic,p:T,h:Hc}}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
[31] "var U=null,Ec=\"\",S=\"\",Dc=\"\",T=\"\",Hc=\"\",Ic=0,Gc=0;qb.add(function(){var a=lb(window.location.hash),b=a.d||\"\",c=b?t(b):null;++Gc;if(c){c=a.u||\"\";a=0<+a.p;var d=hb||J(window.history.state)||{},e=+d.n||0,f=\"\"+(d.p||\"\");d=\"\"+(d.h||\"\");c.match(Ea)||(c=\"\");a!=!!f?R(b,\"\",\"\",Qc()):b==S&&c==Dc&&f==T&&d==Hc||R(b,c,f,d);Ic=e}else S&&I(S);--Gc});var Rc=function(a){g.call(this);this.w=a;this.H=Object.create(null);this.o=null;a=a.querySelectorAll(\".gs_in_txtw>input[type=text]\");for(var b=a.length;b--;){var c=a[b],d=c.parentNode.querySelector(\".gs_in_txts\");c=c.name;d&&c&&(this.H[c]=d.innerHTML)}};ia(Rc,g);Rc.prototype.D=function(){Qb(this.o);this.w=this.o=null;g.prototype.D.call(this)};"                                                                                                                                                                                                                                                                                                                                                  
[32] "Rc.prototype.ea=function(a){var b=this;L(a);if((a=this.w)&&!this.o){var c=\"json=&\"+ya(a);Sc(this,!0);this.o=Pb(a.action,c,function(d,e){b.o=null;Sc(b,!1);var f=b.w,h=f.getAttribute(\"data-alrt\");if(h=h?t(h):null)h.innerHTML=\"\";try{var l=200==d&&JSON.parse(e)}catch(A){}l&&\"object\"==typeof l||(Tc(h,t(\"gs_md_err\").innerHTML),l={});if(d=l.L)Ca(\"\"+d);else{(d=l.M)&&Tc(h,d);d=1E6;if(h&&h.innerHTML){var m=h;d=h.getBoundingClientRect().top}f=f.elements;l=l.E;\"object\"==typeof l||(l=Object.create(null));for(var w in b.H){h="                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
[33] "f[w];e=void 0;var v=\"\"+(l[w]||\"\"),F=h.parentNode.querySelector(\".gs_in_txts\");q(h.parentNode,\"gs_in_txte\",!!v);F&&(F.innerHTML=v||b.H[w]||\"\");v&&(e=h.getBoundingClientRect().top)<d&&(m=h,d=e)}m&&m.scrollIntoView&&(0>d||d+20>window.innerHeight)&&m.scrollIntoView()}})}};"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
[34] "var Sc=function(a,b){a=a.w;var c=a.getAttribute(\"data-bsel\");a=c?document.querySelectorAll(c):a.querySelectorAll(\"button\");for(c=a.length;c--;){var d=a[c];d.disabled=b;q(d,\"gs_bsp\",b)}},Tc=function(a,b){if(a)a.innerHTML=b;else{var c=void 0===c?\"\":c;var d=void 0===d?\"\":d;var e=void 0===e?[]:e;t(\"gs_alrt_m\").innerHTML=b;Kb().action=d.match(Ba)?d:\"\";t(\"gs_alrt_l\").textContent=c;a=t(\"gs_alrt_h\");a.innerHTML=\"\";for(var f in e)b=document.createElement(\"input\"),b.type=\"hidden\",b.name=f,b.value=e[f],a.appendChild(b);"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
[35] "Jb()}};Tb(Rc,[new M(\".gs_ajax_frm\",{submit:Rc.prototype.ea})]);var Uc=[[1,0,1],[2,0,1]];P(\".gs_cb_gen\",\"click\",function(a){var b=a.currentTarget,c=sc(b),d=2==+b.getAttribute(\"data-s\");uc(b,Uc[+d][c],!0);O(\"gs-change\",b,a.a)});P(\".gs_cb_gen\",[\"keydown\",\"keyup\"],function(a){var b=a.currentTarget,c=a.a.keyCode;\"BUTTON\"!=b.tagName||13!=c&&32!=c||(L(a),\"keydown\"==a.type&&b.click())});P([\".gs_cb_gen\",\".gs_md_li\"],\"keydown\",function(a){var b=a.currentTarget,c=b.tagName,d=a.a.keyCode;\"BUTTON\"!=c&&(32==d||13==d&&\"A\"!=c)&&(L(a),b.click())});var Vc=[\"click\",\"contextmenu\",\"mouseup\"].concat(navigator.sendBeacon&&GSP.neverBounce?[]:[\"mousedown\",\"touchstart\"]),Wc=GSP.bouncePrefix||\"http://\"+window.location.host,Xc=\"\",Yc=null;function Zc(){Yc=null}function $c(a){navigator.sendBeacon?navigator.sendBeacon(a):Yc&&a==Yc.src||((Yc=new Image).src=a,setTimeout(Zc,1E3))}function ad(){var a=mb(document.location.href).hl||\"\";a=\"/scholar_bfnav?url=\"+encodeURIComponent(document.location.href)+\"&hl=\"+encodeURIComp"
[36] "D(function(){Xc=Ib?\"&bn=1\":\"\";Ib&&ad()});B(window,\"pageshow\",function(a){a.persisted&&(Xc=\"&bn=1\",ad())});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
[37] "B(document,Vc,function(a){if(!(\"click\"==a.type&&a.button||\"mouseup\"==a.type&&1!=a.button)){var b,c;a:{for(a=a.target;a;){var d=a.nodeName;if(\"A\"==d)break a;if(\"SPAN\"==d||\"B\"==d||\"I\"==d||\"EM\"==d||\"IMG\"==d)a=a.parentNode;else break}a=null}if(a&&(b=a.getAttribute(\"href\"))&&(c=a.getAttribute(\"data-clk\"))){b=\"/scholar_url?url=\"+encodeURIComponent(b)+\"&\"+c+\"&ws=\"+window.innerWidth+\"x\"+window.innerHeight+\"&at=\";d=encodeURIComponent;var e=a.getAttribute(\"data-clk-atid\");e=e&&t(e);b=b+d(e&&e.innerText||\"\")+"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
[38] "Xc;0<c.indexOf(\"scisig=\")?(a.setAttribute(\"href\",Wc+b),a.removeAttribute(\"data-clk\")):$c(b)}}},!1,!0);P(\".gs_fm_s\",\"click\",function(a){a=a.currentTarget.getAttribute(\"data-fm\")||\"\";(a=t(a))&&a.submit()});var V=function(a){this.j=x(a.querySelector(\".gs_md_d\"));this.C=x(a.querySelector(\".gs_md_tb\"))};V.prototype.F=function(a){var b=t(this.j);return void 0!==a?qc(b,b,a):null};V.prototype.open=function(a){a=this.F(a);if(p(t(this.C),\"gs_sel\"))try{a&&a.focus()}catch(c){}else{var b=t(this.C);Wa(this.j,function(){k(b,\"gs_sel\")},function(){n(b,\"gs_sel\")},a,b)}};V.prototype.close=function(){I(this.j)};V.prototype.X=function(a){L(a);p(t(this.C),\"gs_sel\")?this.close():this.open(\"keydown\"==a.a.type?!1:void 0)};"                                                                                                                                                                                                                                                                                                                           
[39] "V.prototype.R=function(a){var b=a.a.keyCode;if(38==b||40==b)L(a),this.open(38==b)};V.prototype.Z=function(a){a.target.id==this.j&&this.R(a)};Tb(V,[new M(\".gs_md_rmb\",{}),new M(\".gs_md_tb\",{\"gs-press\":V.prototype.X,keydown:V.prototype.R}),new M(\".gs_md_d\",{keydown:V.prototype.Z})]);var W=function(a){V.call(this,a);this.ga=x(a.querySelector(\".gs_md_in\"));this.ha=x(a.querySelector(\".gs_md_tb .gs_lbl\"))};ia(W,V);W.prototype.F=function(){return t(this.j).querySelector(\".gs_md_li[aria-selected]\")};W.prototype.$=function(a){bd(this,a)};W.prototype.G=function(a){var b=a.a.keyCode;13!=b&&32!=b||bd(this,a)};"                                                                                                                                                                                                                                                                                                                                                                                                                                               
[40] "var bd=function(a,b){var c=b.currentTarget,d=t(a.ga),e=a.F();c!=e&&(d.value=c.getAttribute(\"data-v\"),t(a.ha).innerHTML=c.innerHTML,e&&cd(e,!1),cd(c,!0));L(b);a.close();O(\"gs-change\",d,b.a)},cd=function(a,b){q(a,\"gs_sel\",b);b?a.setAttribute(\"aria-selected\",\"true\"):a.removeAttribute(\"aria-selected\")};Tb(W,[new M(\".gs_md_ris\",{}),new M(\".gs_md_li\",{click:W.prototype.$,keydown:W.prototype.G})]);P(\"#gs_lp\",\"click\",function(a){L(a);R(\"gs_lp_d\")});P(\"#gs_lp_cur\",\"click\",function(a){L(a);I(\"gs_lp_d\")});var dd=function(a){this.T=x(a)};dd.prototype.G=function(a){var b=a.currentTarget,c=a.a.keyCode;if(38==c||40==c){var d=t(this.T);d=qc(d,b,38==c)||qc(d,d,38==c)}else if(37==c||39==c)a:{c=!!(37==c^xa(b.parentNode));d=b.parentNode;var e=d.children,f=e.length;if(d.id!=this.T){for(;e[--f]!=b;);d=pc(d,c)||oc(d.parentNode,c);e=d.children;if(f=Math.min(f+1,e.length))if(d=e[f-1],p(d,\"gs_md_li\")&&d.offsetLeft!=b.offsetLeft)break a}d=void 0}d&&(L(a),d.focus())};"                                                                  
[41] "Tb(dd,[new M(\".gs_md_ulr\",{}),new M(\".gs_md_li\",{keydown:dd.prototype.G})]);P(\"#gs_hdr_mnu\",\"click\",function(a){L(a);R(\"gs_hdr_drw\")});P(\"#gs_hdr_drw_mnu\",\"click\",function(a){L(a);I(\"gs_hdr_drw\")});P(\"#gs_hdr_act_i\",\"click\",function(a){L(a);1==oa()?Ca(document.querySelector(\"#gs_hdr_drw_bot>a\").href):Wa(\"gs_hdr_act_d\")});P(\"#gs_hdr_drw\",\"keydown\",function(a){var b=a.a.keyCode;if(38==b||40==b){var c=a.currentTarget;if(b=qc(c,c,38==b))L(a),b.focus()}});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
[42] "P(\"#gs_hdr_tsi\",[\"focus\",\"blur\"],function(a){function b(){var h=d.getBoundingClientRect().top-10;10<Math.abs(h)&&window.scrollBy(0,h);clearTimeout(e);c()}function c(){C(window,f,b)}var d=a.target;a=\"focus\"==a.type;q(t(\"gs_hdr\"),\"gs_hdr_ifc\",a);if(a&&pa&&!(749<window.innerHeight)){var e=setTimeout(c,1E3),f=[\"scroll\",\"resize\"];B(window,f,b)}});P(\"#gs_hdr_tsi\",[\"input\",\"gs-change\"],function(a){q(t(\"gs_hdr_frm\"),\"gs_hdr_tsc\",!!a.currentTarget.value)});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
[43] "P(\"#gs_hdr_tsc\",\"mousedown\",function(a){L(a);var b=t(\"gs_hdr_tsi\");b.value=\"\";b.focus();O(\"input\",b,a.a)});P(\"#gs_hdr_sre\",\"click\",function(a){L(a);var b=t(\"gs_hdr\");Wa(\"gs_hdr_frm\",function(){n(b,\"gs_hdr_src\");k(b,\"gs_hdr_srx\")},function(){k(b,\"gs_hdr_src\");n(b,\"gs_hdr_srx\")},t(\"gs_hdr_tsi\"))});P(\".gs_md_x\",\"click\",function(a){(a=a.currentTarget.getAttribute(\"data-mdx\"))&&I(a)});var X=function(){},ed,fd;X.prototype.Y=function(a){a.a.button||(L(a),gd(a))};X.prototype.aa=function(a){hd(a)&&(L(a),gd(a))};X.prototype.ba=function(a){hd(a)&&L(a)};X.prototype.ca=function(a){if(!a.a.button){L(a);var b=a.a;b&&(id=b.clientX||0,jd=b.clientY||0,B(document,kd,ld,!0),clearTimeout(ed),ed=setTimeout(md,2E3));gd(a)}};X.prototype.fa=function(a){L(a);if(nd){var b=a.a;if(b=(b=b&&b.touches)&&1==b.length&&b[0])od=b.clientX,pd=b.clientY,B(document,qd,rd,!0),clearTimeout(fd),fd=setTimeout(sd,2E3)}gd(a)};"                                                                                                                          
[44] "var hd=function(a){a=a.a.keyCode;return 32==a||13==a},gd=function(a){O(\"gs-press\",a.currentTarget,a.a)},md=function(){C(document,kd,ld,!0);clearTimeout(ed);ed=void 0},ld=function(a){\"mousedown\"!=a.type&&10>Math.abs(a.clientX-id)&&10>Math.abs(a.clientY-jd)?(Na(a),\"click\"==a.type&&md()):md()},sd=function(){C(document,qd,rd,!0);clearTimeout(fd);fd=void 0},rd=function(a){\"touchstart\"!=a.type&&10>Math.abs(a.clientX-od)&&10>Math.abs(a.clientY-pd)?(Na(a),\"click\"==a.type&&sd()):sd()},id=0,jd=0,kd=[\"mousedown\","                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
[45] "\"mouseup\",\"click\"],nd=r(\"Android\")&&!r(\"Chrome\"),od=0,pd=0,qd=[\"touchstart\",\"mousedown\",\"mouseup\",\"click\"];Tb(X,[new M(\".gs_press\",{click:X.prototype.Y,keydown:X.prototype.aa,keyup:X.prototype.ba,mousedown:X.prototype.ca,touchstart:X.prototype.fa})]);function td(){var a=0>ud.getBoundingClientRect().top;vd!=a&&(vd=a,q(wd,\"gs_sth_vis\",a),a?xd():(yd.style.left=\"\",yd.style.width=\"\",zd()))}function xd(){if(vd){var a=ud.getBoundingClientRect();yd.style.left=a.left+\"px\";yd.style.width=a.width+\"px\";zd()}}function zd(){O(\"gs-sth-change\",t(\"gs_sth\"))}var wd,ud,yd,vd=!1;D(function(){if(wd=t(\"gs_sth\"))ud=wd.querySelector(\".gs_sth_g\"),yd=wd.querySelector(\".gs_sth_b\"),xc.addListener(td),yc.addListener(xd),td()});function Ad(a){R(\"gs_md_cita-d\",a)}function Bd(a){var b=t(\"gsc_vcd_form\");a=b.action.replace(/([?&]update_op=)[^&]*/,\"$1\"+a);b.action=a.match(Ba)?a:\"\";Cd(b);b.submit()}function Cd(a){za(a,\"continue\").value=window.location.pathname+window.location.search}function Dd(a,b){b=void 0===b?!1:b;var"  
[46] "function Sd(a){var b=t(\"gsc_cods_frm\");if(b){b=b.elements;var c=b[1];b[0].disabled=c.disabled=a;q(c,\"gs_bsp\",a)}a=a?null:t(\"gsc_codb_data\");if(c=t(\"gsc_cods_pp\")){var d=a&&a.getAttribute(\"data-prev\");b=a&&a.getAttribute(\"data-next\");var e=a&&a.getAttribute(\"data-start\"),f=a&&a.getAttribute(\"data-end\");c.querySelector(\".gsc_pgn_ppn\").textContent=e&&f?e+\" - \"+f:\"\";e=c.querySelector(\".gsc_pgn_ppr\");e.disabled=!d;e.setAttribute(\"data-a\",d||\"\");c=c.querySelector(\".gsc_pgn_pnx\");c.disabled=!b;c.setAttribute(\"data-a\","                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
[47] "b||\"\")}a&&(Td=+a.getAttribute(\"data-max\")||0,za(t(\"gsc_cods_save\"),\"xsrf\").value=a.getAttribute(\"data-xsrf\")||\"\")}function Ud(){var a=0<Y.g||0<Z.g,b=Id(),c=0>=b;t(\"gsc_cod_done\").disabled=!a||0>b;q(t(\"gsc_cod_t\"),\"gsc_cod_changed\",a);a=t(\"gsc_cod_trev\");a.textContent=a.getAttribute(c?\"data-lim\":\"data-txt\")||\"\";q(t(\"gsc_cod_t\"),\"gsc_cod_lim\",c)}function Id(){return Td-Y.g+(\"gsc_cod_sugg\"==Md?0:Z.g)}function Qd(){return t(\"gsc_cods_tsi\")}"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
[48] "function Vd(a){for(var b=\"\",c=la(a.f),d=c.length;d--;)b+=a.get(c[d]);return b}var Md=\"gsc_cod_lc\",Td=0,Rd=/([?&]mauthors=)([^&]*)/,Y=new Q,Z=new Q;var Wd=0;function Xd(a){q(t(\"gsc_a_sp\"),\"gs_vis\",0==a);q(t(\"gsc_a_err\"),\"gs_vis\",2==a)}function Yd(){return document.querySelectorAll(\"#gsc_a_t input[type=checkbox]\")}function Zd(){O(\"gsc-works-change\",t(\"gsc_a_t\"))}function ae(){var a=t(\"gsc_x_all\");if(a){var b=document.querySelectorAll(\"#gsc_a_t input[type=checkbox]:checked\");var c=b.length;var d=Yd().length;c=c?c==d?1:2:0;uc(a,c);2==c&&(ce=b)}Zd()}var ce=[];var de=\"\",ee=0,fe=0;function ge(a){for(var b=[!1,!1,!1],c=0;c<b.length;c++){var d=t(he[c]);d&&(b[c]=!!a(d))}return b}function ie(){var a=t(\"gsc_fol_m\");if(a){var b=t(\"gsc_fol_b\");if(!(a=!Fd.test(a.value))){a:{a=ge(sc);for(var c=ge(tc),d=0;d<a.length;d++)if(a[d]!=c[d]){a=!0;break a}a=!1}a=!a}b.disabled=a}}var he=[\"gsc_fol_a\",\"gsc_fol_c\",\"gsc_fol_r\"],je=[\"follow_articles_btn\",\"follow_citations_btn\",\"follow_related_btn\"];function ke(){p(d"          
[49] "P([\".gsc_ccb_add\",\".gsc_ccb_del\"],\"click\",function(a){a=a.currentTarget;if(!Gd(a)){var b=!p(a,\"gsc_ccb_on\");q(a,\"gsc_ccb_on\",b);var c=p(a,\"gsc_ccb_add\")?\".gsc_ccb_del\":\".gsc_ccb_add\",d=a.parentNode;(c=d&&d.querySelector(c))&&n(c,\"gsc_ccb_on\");c=a.getAttribute(\"data-authorid\")||\"\";Y.delete(c);Z.delete(c);b&&(p(a,\"gsc_ccb_add\")?Y:Z).set(c,t(\"gsc_ucoar-\"+c).outerHTML);Hd();Ud()}});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
[50] "P(\"#gsc_cod_trev\",\"click\",function(){var a=t(\"gsc_cods_res\").cloneNode(!0),b=a.querySelector(\"#gsc_codb_content\");b||(b=document.createElement(\"div\"),b.id=\"gsc_codb_content\",a.appendChild(b));var c=Vd(Y)+Vd(Z);b.innerHTML=c;(b=Qd())&&(b.value=\"\");Ld(\"\",a.innerHTML)});P(\"#gsc_cod_done\",\"click\",function(){var a=t(\"gsc_cods_save\");za(a,\"colleague_add\").value=la(Y.f).join(\",\");za(a,\"colleague_del\").value=la(Z.f).join(\",\");a.submit()});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
[51] "P([\"#gsc_coauth_opn\",\".gsc_rsb_btne\",\".gsc_rsb_btnv\"],\"click\",function(){Nd(\"gsc_cod_lc\");Td=0;Y.clear();Z.clear();var a=Qd();a&&(a.value=\"\");Pd()});P(\".gsc_rsb_aa\",[\"click\",\"keydown\"],function(a){if(\"keydown\"!=a.type||a.a&&!Oa(a.a)&&13==a.a.keyCode)a.a&&Na(a.a),(a=(a=a.currentTarget.querySelector(\"a\"))?a.getAttribute(\"href\"):\"\")&&Ca(a)});P(\"#gsc_prf_t-ath\",\"click\",function(){Ed()});D(function(){zc.add(ke);ke()});P(\".gsc_lwpds_frm\",\"submit\",function(a){L(a);O(\"gsc-lwpds-submit\",a.target)});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
[52] "var oe=window.location.href.split(\"#\")[0];de=oe.replace(/([?&])(cstart|pagesize)=[^&]*/g,\"$1\");ee=Math.max(+oe.replace(/.*[?&]cstart=([^&]*).*/,\"$1\")||0,0);fe=+oe.replace(/.*[?&]pagesize=([^&]*).*/,\"$1\")||0;fe=Math.max(Math.min(fe,100),20);"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
[53] "P(\"#gsc_bpf_more\",\"click\",function(a){var b=a.currentTarget,c=fe,d=100>c?100-c:100;a=(de+\"&cstart=\"+(ee+c)+\"&pagesize=\"+d).replace(/([?&])&+/g,\"$1\");Xd(0);b.disabled=!0;Pb(a,\"json=1\",function(e,f){b.disabled=!1;try{var h=200==e&&JSON.parse(f)}catch(m){}if(h&&\"object\"==typeof h){fe=c+=d;Xd(1);e=t(\"gsc_a_b\");f=document.createElement(va.V);f.innerHTML=\"\"+h.B;f=Array.prototype.slice.call(f.rows);for(var l=0;l<f.length;l++)e.appendChild(f[l]);ae();if(e=t(\"gsc_a_nn\"))f=e.innerHTML.replace(/[0-9]+$/,\"\"+"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
[54] "t(\"gsc_a_b\").rows.length),e.innerHTML=f;b.disabled=!h.N}else Xd(2)})});P([\"#gsc_fol_a\",\"#gsc_fol_c\",\"#gsc_fol_r\"],\"gs-change\",ie);P(\"#gsc_fol_m\",\"input\",ie);P(\"#gsc_fol_f\",\"submit\",function(a){a.a&&a.a.preventDefault();a=t(\"gsc_fol_f\");var b=t(\"gsc_fol_inp\");b.innerHTML=\"\";for(var c=ge(sc),d=ge(tc),e=0;e<c.length;e++)if(c[e]!=d[e]){var f=je[e],h=document.createElement(\"input\");h.type=\"hidden\";h.name=c[e]?f:\"un\"+f;b.appendChild(h)}O(\"gsc-fol-submit\",a)});P(\"#gsc_fol_f\",\"gsc-fol-submit\",function(a){a.currentTarget.submit()});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
[55] "P(\"#gsc_md_hist\",\"gs-md-lded\",function(){var a=t(\"gsc_md_hist_c\");if(!a.innerHTML){var b=document.getElementsByClassName(\"gsc_g_hist_wrp\");1==b.length&&(a.appendChild(b[0].cloneNode(!0)),le(a.lastChild))}});P([\"#gsc_hist_opn\",\".gsc_md_hist_b\"],\"click\",function(){var a=document.documentElement;!t(\"gsc_hist_opn\")||p(a,\"gs_el_ph\")||p(a,\"gs_el_ta\")||R(\"gsc_md_hist\")});P(\"#gsc_lwp_mndt_btn\",\"click\",function(a){a=a.currentTarget.getAttribute(\"data-href\")+\"&tzom=\"+(new Date).getTimezoneOffset();window.location.assign(a)});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
[56] "P(\"#gsc_prf_btne\",\"click\",function(){var a=t(\"gsc_md_pro-d\");a.setAttribute(\"data-ifc\",\"\");R(a.id,gb({t:\"gsc_md_pro_ed\"}))});P(\"#gsc_prf_btnf\",\"click\",function(){R(\"gsc_md_fol\")});P(\"#gsc_md_fol_pub\",\"click\",function(){t(\"gsc_fol_mpf\").submit()});P(\"#gsc_prf_iv_tg\",\"click\",function(){q(t(\"gsc_prf_w\"),\"gsc_prf_why\")});P(\".gsc_prf_pel\",[\"click\",\"keydown\"],function(a){(\"keydown\"!=a.type||13==a.a.keyCode&&a.a&&!Oa(a.a))&&me()});P(\"#gsc_prf_pufii\",\"change\",function(){t(\"gsc_prf_puf\").submit()});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
[57] "P(\".gsc_prf_tab\",\"click\",function(a){var b=t(\"gsc_bdy\");b.setAttribute(\"data-tab\",a.currentTarget.id);b=b.querySelectorAll(\".gsc_prf_tab\");for(var c=0;c<b.length;c++){var d=b[c];d.setAttribute(\"aria-selected\",\"\"+(d==a.currentTarget))}});D(function(){zc.add(ne);ne()});P(\"#gsc_md_cbyd\",\"gs-md-ldin\",function(){var a=t(\"gsc_md_cbyd_merge\");a&&(a.disabled=!0);Aa(\"\")});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
[58] "P(\"#gsc_md_cbyd\",\"gs-md-lded\",function(){var a=t(\"gsc_md_cbyd_f\"),b=t(\"gsc_md_cbyd_merge\"),c=Ec,d=mb(c).s||\"\";c=lb(c).c||\"\";a.elements.s.value=d;Aa(c);b&&a.elements.choose&&(b.disabled=!1,b.getBoundingClientRect().bottom<window.innerHeight&&b.focus())});P(\"#gsc_md_cbym\",[\"gs-md-ldin\",\"gs-md-lded\"],function(){var a=mb(Ec).s||\"\",b=t(\"gsc_md_cbym_e\");b&&a&&0>a.indexOf(\"&\")&&b.setAttribute(\"data-href\",(b.getAttribute(\"data-href\")||\"\").replace(/(&citation_for_view=)[^&]*/,\"$1\"+a))});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
[59] "P(\"#gsc_md_cbym_e\",\"click\",function(a){a=a.currentTarget.getAttribute(\"data-href\")||\"\";Ad(a)});Tb(Jd,Kd);D(function(){return setTimeout(ae,0)});P(\".gsc_a_x\",\"change\",ae);P(\"#gsc_x_all\",\"gs-change\",function(a){a=sc(a.currentTarget);for(var b=2==a?ce:Yd(),c=b.length;c--;)b[c].checked=0!=a;Zd()});P(\".gsc_a_at\",\"click\",function(a){L(a);a=a.currentTarget.getAttribute(\"data-href\")+\"&tzom=\"+Wd;Ad(a)});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
[60] "P(\".gsc_a_acm\",\"click\",function(a){L(a);var b=a.currentTarget;a=b.href;var c=b.getAttribute(\"data-eid\")||\"\";b=b.getAttribute(\"data-eud\")||\"\";a=t(\"gsc_md_cbyd_f\").action+\"&update_op=merge_options&s=\"+(b+\",\"+c)+gb({c:a});R(\"gsc_md_cbyd\",a)});P(\".gsc_a_am\",\"click\",function(a){a=a.currentTarget.getAttribute(\"data-eid\")||\"\";a=(t(\"gsc_md_cbym_l\").getAttribute(\"data-act\")||\"\")+\"&update_op=merge_options&s=\"+a;R(\"gsc_md_cbym\",a)});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
[61] "P(\"#gs_sth\",\"gs-sth-change\",function(a){var b=t(\"gsc_a_tr0\"),c=t(\"gsc_a_trh\"),d=b.querySelector(\".gsc_a_t\"),e=c.querySelector(\".gsc_a_t\");p(a.currentTarget,\"gs_sth_vis\")?(e.style.width=d.offsetWidth+\"px\",b.style.height=c.offsetHeight+\"px\"):e.style.width=b.style.height=\"auto\"});Wd=(new Date).getTimezoneOffset();P(\"#gs_md_cita-d\",\"gs-md-ldin\",function(){Dd(\"\")});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
[62] "P(\"#gs_md_cita-d\",\"gs-md-lded\",function(){var a=t(\"gsc_ocd_bdy\");if(a){var b=a.getAttribute(\"data-btns\")||\"\";Dd(b,a.hasAttribute(\"data-upload\"));if(a=t(\"gsc_vcd_graph_bars\")){var c=a.scrollWidth;xa(a)?a.scrollLeft?a.scrollLeft=0:(a.scrollLeft=-c,a.scrollLeft||(a.scrollLeft=c)):a.scrollLeft=c}\"view\"==b&&O(\"gs-want-gapi\",t(\"gsc_bdy\"))}});P(\"#gs_md_cita-b-edit\",\"click\",function(){var a=t(\"gsc_ocd_bdy\");a&&(n(a,\"gsc_ocd_bdy_view\"),Dd(\"edit\"),Nc(\"gs_md_cita-d\"))});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
[63] "P(\"#gs_md_cita-b-upload\",\"click\",function(){var a=t(\"gsc_ocd_bdy\");a&&(n(a,\"gsc_ocd_bdy_view\"),k(a,\"gsc_ocd_bdy_upload\"),Dd(\"upload\"),Nc(\"gs_md_cita-d\"))});P(\"#gs_md_cita-b-trash\",\"click\",function(){Bd(\"trash_citations\")});P(\"#gs_md_cita-b-rstr\",\"click\",function(){Bd(\"untrash_citations\")});P(\"#gs_md_cita-b-delf\",\"click\",function(){Bd(\"delete_citations\")});P(\"#gs_md_cita-b-save\",\"click\",function(){var a=t(\"gsc_ecd_form\");Cd(a);O(\"submit\",a)});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
[64] "P(\".gsc_ecd_form_tsel\",\"click\",function(a){var b=t(\"gsc_ecd_table\"),c=za(t(\"gsc_ecd_form\"),\"articletype\");a=a.currentTarget;c.value=a.getAttribute(\"data-type\")||\"\";b.className=a.getAttribute(\"data-class\")||\"\";b=document.querySelectorAll(\"#gsc_ecd_citation_type button\");for(c=b.length;c--;)q(b[c],\"gs_sel\",b[c]==a)});P(\"#gs_bdy\",\"gs-gapi-ready\",function(){t(\"gs_md_cita-b-upload\").disabled=!1});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
[65] "P(\"#gs_bdy\",\"gs-upload-success\",function(){var a=t(\"gsc_vcd_form\").getAttribute(\"data-url\")+\"&view_op=view_citation&citation_for_view=\"+t(\"gsc_vcd_cid\").getAttribute(\"value\");Ad(a)});"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
[66] "}({\"bouncePrefix\":\"http://scholar.google.com\",\"neverBounce\":!1,\"customAC\":0,\"eventId\":\"zUa8XuK_AoGemAHK3JGQBA\"});</script></head><body><div id=\"gs_top\" onclick=\"\"><style>#gs_md_s,.gs_md_wnw{z-index:1200;position:fixed;top:0;left:0;width:100%;height:100%;visibility:hidden;}#gs_md_s{background-color:#fff;opacity:.5;}.gs_el_ta #gs_md_s,.gs_el_ph #gs_md_s{background-color:#666;}.gs_md_wnw{transition:all 0s .218s;}#gs_md_s.gs_vis,.gs_md_wnw.gs_vis{visibility:visible;transition:all 0s;}.gs_md_wnw>.gs_md_d{position:relative;margin:0 auto;width:464px;box-shadow:2px 2px 8px rgba(0,0,0,.2);white-space:normal;}.gs_el_ta .gs_md_wnw>.gs_md_d,.gs_el_ph .gs_md_wnw>.gs_md_d{box-shadow:2px 2px 8px rgba(0,0,0,.65);}.gs_el_ph .gs_md_wnw>.gs_md_d{width:80%;max-width:440px;}.gs_el_ph .gs_md_wmw>.gs_md_d{width:100%;height:100%;max-width:none;border:none;box-shadow:none;transform:translate(0,100%);transform:translate(0,100vh);transition:transform .27s cubic-bezier(.4,0,.6,1),opacity 0s .27s,visibility 0s .27" 
> class(htmlCode)  # character vector
[1] "character"
> length(htmlCode)  # length is 1, there is only one element in the vector
[1] 66
> nchar(htmlCode)  # number of characters in the vector
 [1] 53526     0    39    36     2   384  1327   743   498   639   544   479   865
[14]   355   789   460   322   499  1676   407   314   469   464   929  2008   502
[27]   502   191   434   494   680   517   269   514  1034   106   503   707   605
[40]   954   455   452   894   507  2458   516   440  2063   381   435   495   240
[53]   501   529   521   495   366   483   398   426   363   464   446   395   183
[66] 44286
> class(htmlCode)  # character vector
## [1] "character"
> length(htmlCode)  # length is 1, there is only one element in the vector
## [1] 1
nchar(htmlCode)  # number of characters in the vector
## [1] 74509
```

# Parsing with XML
- More convenient is using the XML library's htmlTreeParse function, against which we can use xpathSApply. As before, it helps to know XPath
```R
> library(XML)
> url <- "http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en"
> html <- htmlTreeParse(url, useInternalNodes = T)
> xpathSApply(html, "//title", xmlValue)
[1] "Jeff Leek - Google Scholar Citations"
> xpathSApply(html, "//td[@id='col-citedby']", xmlValue)
[1] "Cited by" "404"      "290"      "267"      "178"      "152"     
[7] "136"      "134"      "126"      "117"      "45"       "33"      
[13] "32"       "30"       "23"       "15"       "15"       "12"      
[19] "12"       "9"        "7"
```

#GET from the httr package
```
> library(httr); html2 = GET(url)
> class(html2)
[1] "response"
> content2 = content(html2, as = "text")
> class(content2)
[1] "character"
> parsedHtml = htmlParse(content2, asText = TRUE)
> xpathSApply(parsedHtml, "//title", xmlValue)
[1] "Jeff Leek - Google Scholar Citations"

# Accessing websites with passowrds
-The following requires authentication, so returns a 401. My code below also demonstrates that the response is a list, and one of its members is status_code, which contains the 401. So you can programmatically check for a 200 code, which means everything is OK.
```R
> pg1 = GET("http://httpbin.org/basic-auth/user/passwd")
> pg1
Response [http://httpbin.org/basic-auth/user/passwd]
Status: 401
Content-type:

> names(pg1)
## [1] "url"         "handle"      "status_code" "headers"     "cookies"    
## [6] "content"     "times"       "config"
> pg1$status_code
[1] 401
```
- Information about the httr package [here](https://cran.r-project.org/web/packages/httr/httr.pdf)

- Now authenticate:
```R
> pg2 = GET("http://httpbin.org/basic-auth/user/passwd", authenticate("user", 
    "passwd"))
> pg2$status_code
[1] 200
> pg2
 Response [http://httpbin.org/basic-auth/user/passwd]
   Status: 200
   Content-type: application/json
 {
   "user": "user",
   "authenticated": true
 }
> names(pg2)
 [1] "url"         "handle"      "status_code" "headers"     "cookies"    
 [6] "content"     "times"       "config"
```

# Using handles
```R
google = handle("http://google.com")
pg1 = GET(handle=google,path="/")
pg2 = GET(handle=google,path="search")
```
# Notes and further resources
- R Bloggers has a number of examples of web scraping: http://www.r-bloggers.com/?s=Web+Scraping
The httr help file has 
- The httr help file has useful examples:  http://cran.r-project.org/web/packages/httr/httr.pdf
- See later lectures on APIs

# Resources
-https://rstudio-pubs-static.s3.amazonaws.com/16815_e9607bbe2eb140278f4146a2560d83e7.html
